<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>A Magical Wish for Ria! ✨</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    :root { --cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" style="font-size: 24px;"><text y="24">💖</text></svg>'), auto; }

    body {
      font-family: 'Inter', sans-serif;
      background-color: #0b001a;
      height: 100vh;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: var(--cursor);
    }

    /* === 1. SPARKLING STARS & FLOATING WORDS BACKGROUND === */
    #stars-container, #floating-words-container {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none;
    }
    #stars-container {
      background: linear-gradient(-45deg, #2c004f, #1a002e, #4f0050, #2c004f);
      background-size: 400% 400%;
      animation: gradientMove 20s ease infinite;
      z-index: 1;
    }
    #floating-words-container { z-index: 2; }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; }
    }
    .star {
      position: absolute; background-color: white; border-radius: 50%;
      box-shadow: 0 0 10px #ffffff, 0 0 5px #ffc0cb;
      animation: twinkle linear infinite;
    }
    @keyframes twinkle {
      0%, 100% { opacity: 0; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1); }
    }
    /* NEW: Floating Words Style */
    .floating-word {
        position: absolute;
        font-family: 'Caveat', cursive;
        color: rgba(255, 255, 255, 0.3);
        font-size: 30px;
        user-select: none;
        animation: floatUp linear forwards;
    }
    @keyframes floatUp {
        0% { transform: translateY(0) rotate(0deg); opacity: 0; }
        15%, 85% { opacity: 1; }
        100% { transform: translateY(-150px) rotate(20deg); opacity: 0; }
    }


    /* === 2. THE ENVELOPE === */
    .envelope-container {
      position: relative; width: 320px; height: 200px; cursor: var(--cursor);
      animation: pulse 2.5s ease-in-out infinite;
      transition: transform 0.6s ease, opacity 0.6s ease; z-index: 10;
    }
    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    .envelope-container.open { transform: scale(0.8); opacity: 0; pointer-events: none; }
    .envelope-flap {
      position: absolute; top: 0; left: 0; width: 100%; height: 100px;
      background: linear-gradient(to bottom, #ff69b4, #ffb6c1);
      border-bottom: 4px solid #ff69b4; border-radius: 15px 15px 0 0;
      transform-origin: top; transition: transform 0.6s ease-in-out; z-index: 3;
    }
    .envelope-body {
      position: absolute; bottom: 0; left: 0; width: 100%; height: 100%;
      background-color: #fff0f5; border-radius: 15px; border: 4px solid #ff69b4;
      box-shadow: 0 0 25px rgba(255, 105, 180, 0.7); z-index: 1;
    }
    .envelope-text {
      position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%);
      z-index: 4; color: white; font-size: 1.5rem; font-weight: bold; text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
    }
    .envelope-container.open .envelope-flap { transform: rotateX(180deg); }

    /* === 3. THE LETTER CARD === */
    .letter-card {
      position: absolute; width: 90vw; max-width: 600px; height: auto; min-height: 450px;
      background: #fefcf3; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      padding: 30px 40px; text-align: center;
      display: flex; flex-direction: column; justify-content: space-between;
      opacity: 0; transform: scale(0.5) rotate(-15deg); pointer-events: none;
      transition: opacity 0.8s ease-out 0.5s, transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.5s;
      z-index: 20;
    }
    .letter-card.show { opacity: 1; transform: scale(1) rotate(0deg); pointer-events: auto; }
    .letter-card h1 { font-family: 'Caveat', cursive; font-size: clamp(2rem, 6vw, 3rem); color: #ff1493; }
    .letter-card p { font-family: 'Caveat', cursive; font-size: clamp(1.5rem, 4vw, 1.8rem); color: #333; line-height: 1.5; min-height: 2.5em; text-align: center;}
    .closing-container { width: 100%; text-align: right; }
    .closing-container p { min-height: 1.8em; }

    .typing-cursor::after {
        content: '|'; display: inline-block; animation: blink 0.7s infinite; color: #d63384;
    }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

    /* === 4. UI CONTROLS === */
    .controls {
      position: fixed; top: 20px; right: 20px; z-index: 100;
      display: flex; gap: 15px;
      opacity: 0; pointer-events: none; transition: opacity 0.5s ease 2s;
    }
    .controls.show { opacity: 1; pointer-events: auto; }
    .control-btn {
      background: rgba(255, 255, 255, 0.2); border: 1px solid rgba(255, 255, 255, 0.4);
      color: white; width: 50px; height: 50px; border-radius: 50%;
      font-size: 24px; display: flex; align-items: center; justify-content: center;
      backdrop-filter: blur(5px); transition: background 0.3s, transform 0.3s;
    }
    .control-btn:hover { background: rgba(255, 255, 255, 0.4); transform: scale(1.1); }

    /* === 5. CELEBRATION EFFECTS === */
    .confetti, .heart { position: fixed; z-index: 999; opacity: 0; pointer-events: none; }
    .confetti { width: 8px; height: 8px; background: var(--color); border-radius: 50%; animation: fall linear forwards; }
    @keyframes fall { 0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; } 100% { transform: translateY(110vh) rotate(720deg); opacity: 0; } }
    .heart { font-size: 1.5rem; color: var(--color); animation: floatHeart ease-out forwards; }
    @keyframes floatHeart { 0% { transform: translateY(110vh) scale(0.5); opacity: 0; } 30% { opacity: 1; } 100% { transform: translateY(-10vh) scale(1); opacity: 0; } }
  </style>
</head>
<body>

  <div id="stars-container"></div>
  <div id="floating-words-container"></div>

  <audio id="openSound" src="Envelope.mp3" preload="auto"></audio>
  <audio id="backgroundMusic" src="bir.mp3" loop preload="auto"></audio>

  <!-- The Envelope -->
  <div class="envelope-container" id="envelopeContainer">
    <div class="envelope-flap"></div>
    <div class="envelope-body"></div>
    <div class="envelope-text">A special note for Ria...</div>
  </div>

  <!-- The Letter Card -->
  <div class="letter-card" id="letterCard">
    <div class="message-content">
      <h1>Happy Birthday, Ria! 🎂</h1>
      <p><span id="line1" class="typing-cursor"></span></p>
    </div>
    <div class="closing-container">
      <p><span id="line2" class="typing-cursor"></span></p>
      <p><span id="signature" class="typing-cursor"></span></p>
    </div>
  </div>

  <!-- UI Controls -->
  <div class="controls" id="controls">
    <button class="control-btn" id="replayBtn" title="Replay Animation">🔄</button>
    <button class="control-btn" id="musicBtn" title="Pause/Play Music">🎵</button>
  </div>

  <script>
    // --- DOM Elements ---
    const envelope = document.getElementById("envelopeContainer");
    const letterCard = document.getElementById("letterCard");
    const openSound = document.getElementById("openSound");
    const backgroundMusic = document.getElementById("backgroundMusic");
    const controls = document.getElementById("controls");
    const replayBtn = document.getElementById("replayBtn");
    const musicBtn = document.getElementById("musicBtn");

    // --- Text for Typing Animation ---
    const line1Text = "To the sweetest soul in the universe, may your day be as magical and radiant as your smile!";
    const line2Text = "Wishing you endless love & sparkle!";
    const signatureText = "With love, from Anitha 💕";

    // --- State ---
    let isCardOpen = false;
    let wordInterval;

    // --- Particle, Star, and Word Effects ---
    function createParticles(type, count, colors) {
      for (let i = 0; i < count; i++) {
        const el = document.createElement("div");
        el.className = type;
        el.style.setProperty("--color", colors[Math.floor(Math.random() * colors.length)]);
        el.style.left = Math.random() * 100 + "vw";
        el.style.animationDuration = (type === 'heart' ? 4 + Math.random() * 4 : 3 + Math.random() * 3) + "s";
        if (type === 'heart') {
            el.innerHTML = "❤️"; el.style.fontSize = (1 + Math.random()) + "rem";
        }
        document.body.appendChild(el);
        el.addEventListener("animationend", () => el.remove());
      }
    }

    function createStars() {
        const container = document.getElementById('stars-container');
        if (container.childElementCount > 0) return;
        for(let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            const size = Math.random() * 3;
            star.style.width = `${size}px`; star.style.height = `${size}px`;
            star.style.top = `${Math.random() * 100}%`; star.style.left = `${Math.random() * 100}%`;
            star.style.animationDelay = `${Math.random() * 5}s`; star.style.animationDuration = `${2 + Math.random() * 3}s`;
            container.appendChild(star);
        }
    }

    // NEW: Floating Words Function
    function createFloatingWord() {
        const words = ["Joy", "Love", "Smile", "Hugs", "Magic", "Sparkle", "Happy"];
        const container = document.getElementById('floating-words-container');

        const wordEl = document.createElement('div');
        wordEl.className = 'floating-word';
        wordEl.textContent = words[Math.floor(Math.random() * words.length)];

        wordEl.style.left = `${Math.random() * 90}vw`;
        wordEl.style.bottom = `-50px`; // Start from below the viewport
        wordEl.style.fontSize = `${20 + Math.random() * 20}px`;
        wordEl.style.animationDuration = `${5 + Math.random() * 5}s`;

        container.appendChild(wordEl);

        wordEl.addEventListener('animationend', () => {
            wordEl.remove();
        });
    }

    // --- Typewriter Effect ---
    function typeWriter(elementId, text, speed, onComplete) {
      const element = document.getElementById(elementId);
      element.innerHTML = "";
      let i = 0;
      function type() {
        if (i < text.length) {
          element.innerHTML += text.charAt(i); i++;
          setTimeout(type, speed);
        } else {
            element.classList.remove('typing-cursor');
            if(onComplete) onComplete();
        }
      }
      element.classList.add('typing-cursor');
      type();
    }

    // --- Main Functions ---
    function openCard() {
      if(isCardOpen) return;
      isCardOpen = true;

      envelope.classList.add("open");
      openSound.play().catch(e => console.error("Sound failed:", e));

      setTimeout(() => {
        letterCard.classList.add("show");
        controls.classList.add("show");
        backgroundMusic.volume = 0.3;
        backgroundMusic.play().catch(e => console.error("Music failed:", e));
      }, 600);

      setTimeout(() => {
        createParticles('confetti', 60, ['#ff69b4', '#ffc0cb', '#ffb6c1', '#ffffff']);
        createParticles('heart', 30, ['#ff1493', '#ffc0cb']);
        // Start floating words
        wordInterval = setInterval(createFloatingWord, 1000);
      }, 1200);

      setTimeout(() => {
        typeWriter('line1', line1Text, 50, () => {
          typeWriter('line2', line2Text, 60, () => {
            typeWriter('signature', signatureText, 70);
          });
        });
      }, 1400);

      setTimeout(() => envelope.style.zIndex = -1, 1000);
    }

    function resetAnimation() {
      isCardOpen = false;
      letterCard.classList.remove("show");
      controls.classList.remove("show");
      envelope.classList.remove("open");
      envelope.style.zIndex = 10;

      backgroundMusic.pause();
      backgroundMusic.currentTime = 0;
      musicBtn.innerHTML = '🎵';

      // Stop and clear floating words
      clearInterval(wordInterval);
      document.getElementById('floating-words-container').innerHTML = '';

      document.getElementById('line1').innerHTML = "";
      document.getElementById('line2').innerHTML = "";
      document.getElementById('signature').innerHTML = "";
    }

    // --- Event Listeners ---
    envelope.addEventListener("click", openCard);
    replayBtn.addEventListener("click", resetAnimation);

    musicBtn.addEventListener("click", () => {
      if (backgroundMusic.paused) {
        backgroundMusic.play();
        musicBtn.innerHTML = '🎵';
      } else {
        backgroundMusic.pause();
        musicBtn.innerHTML = '🔇';
      }
    });

    // --- Initial Setup ---
    createStars();
  </script>
</body>
</html>
